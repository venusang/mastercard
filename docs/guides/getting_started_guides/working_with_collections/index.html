<!DOCTYPE html>
<html class="no-js">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Working with Collections | Getting Started Guides | SDK Documentation</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css">
</head>
<body>
  <!--[if lt IE 8]>
  <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
  <![endif]-->
  
  <div class="container">
    <div class="page-header">
      <h1>
        <small>SDK Documentation - Getting Started Guides</small>
        <br>
        Working with Collections
      </h1>
    </div>
    
    <div class="row">
      <div class="col-md-8 col-md-offset-2">
        <ol class="breadcrumb">
          <li><a href="../../../index.html">Home</a></li>
          <li class="active">Getting Started Guides</li>
          <li class="active">Working with Collections</li>
        </ol>
      </div>
    </div>
  </div>
  
  <div class="container">
    <div class="row">
      <div class="col-md-8 col-md-offset-2">
        <p>Collections are sets of model instances.  They are the primary means to GET records from the server.  Using collections is easy:</p>

<h4>Fetch</h4>

<pre><code>collection = new AppSdk.collections.ObjectAll()
collection.fetch()</code></pre>

<h4>Paginate:  get no more than five objects, starting at the fifteenth</h4>

<pre><code>collection = new AppSdk.collections.ObjectAll()
collection.fetch({data: {limit: 5, offset: 15}})</code></pre>

<h4>Query for one specific object</h4>

<pre><code>collection = new AppSdk.collections.ObjectExactMatch()
collection.query {id: &#39;12345&#39;},
  complete: -&gt;
    alert &#39;completed&#39;</code></pre>

<p>Since collections fetch records from a server via asynchronous calls, working with their records is generally accomplished with event handlers.  In BackboneJS 1.0 or later, listen for a collection&#39;s sync event. In versions prior to 1.0, listen for the reset event.  Review the collections documentation for details.</p>

<h4>Create an event handler function</h4>

<pre><code>onCollectionSync = -&gt;
  // log each record in the collection to the console
  @each (record) -&gt; console.log record
// Attach event handler to collection sync event
collection.on(&#39;sync&#39;, onCollectionSync, collection)</code></pre>

<p>Once a collection is fetched it provides a number of useful methods.  See the BackboneJS documentation for a complete list.</p>

<h4>Iterate over every record in a collection</h4>

<pre><code>collection.each (record) -&gt;
  alert record.id</code></pre>

<h4>Get the first object from a collection</h4>

<pre><code>instance = collection.first()</code></pre>

<h4>Find all local records with matching attributes</h4>

<pre><code>results = collection.where
  value: 1</code></pre>

<h4>Get only the first object with matching attributes</h4>

<pre><code>instance = collection.findWhere
  value: 1</code></pre>

<h4>Get a sorted array of objects</h4>

<pre><code>results = collection.sortBy (record) -&gt;
  record.get &#39;value&#39;</code></pre>

<h4>Flatten collection to an array of values</h4>

<pre><code>collection.map (record) -&gt;
  record.get &#39;value&#39;</code></pre>

<h3>Event Handling</h3>

<pre><code># do something useful after fetch
todos.on &#39;reset&#39;, -&gt;
  alert &#39;reloaded!&#39;

# do useful things after a record changes
todos.on &#39;change&#39;, -&gt;
  alert &#39;a model changed!&#39;</code></pre>
      </div>
    </div>
    
    <hr>
  </div>
  
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
  <script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js"></script>
</body>
</html>
